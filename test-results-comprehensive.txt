â€‰WARNâ€‰ Unsupported engine: wanted: {"node":"22.x"} (current: {"node":"v24.11.1","pnpm":"10.22.0"})

> sparecarry@0.1.0 test:comprehensive C:\SpareCarry
> node scripts/test-comprehensive.js

[dotenv@17.2.3] injecting env (19) from .env.local -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
âœ… Loaded .env.local using dotenv
Script starting...

============================================================
Test Run Started: 2025-11-24T08:32:26.302Z
Node Version: v24.11.1
Working Directory: C:\SpareCarry
Script Path: C:\SpareCarry\scripts\test-comprehensive.js
============================================================

âœ… dotenv module loaded
ğŸš€ Starting Comprehensive Automated Tests...

============================================================

ğŸ§ª Testing: Environment Variables...
âœ… PASSED: Environment Variables
   count: 8

ğŸ§ª Testing: Database Connectivity...
âœ… PASSED: Database Connectivity
   connected: true
   canQuery: true

ğŸ§ª Testing: Stripe Connectivity...
âœ… PASSED: Stripe Connectivity
   connected: true
   mode: "test"

ğŸ§ª Testing: API Endpoints...
âœ… PASSED: API Endpoints
   accessible: 6
   endpoints: [{"endpoint":"/api/matches/auto-match","status":401,"note":"Endpoint exists and responded"},{"endpoint":"/api/payments/create-intent","status":401,"note":"Endpoint exists and responded"},{"endpoint":"/api/payments/confirm-delivery","status":401,"note":"Endpoint exists and responded"},{"endpoint":"/api/payments/auto-release","status":401,"note":"Endpoint exists and responded"},{"endpoint":"/api/notifications/register-token","status":401,"note":"Endpoint exists and responded"},{"endpoint":"/api/notifications/send-message","status":"error","error":"The operation was aborted due to timeout","note":"Server running but endpoint unreachable - check if route exists"}]

ğŸ§ª Testing: Auto-Release Cron...
   âš ï¸  Server not running at http://localhost:3000 - start with: pnpm dev
   â„¹ï¸  This is OK - endpoint exists but needs server to be running
âœ… PASSED: Auto-Release Cron
   accessible: false
   warning: "Server not running"
   note: "Start server with: pnpm dev"

ğŸ§ª Testing: Matching Algorithm...
âœ… PASSED: Matching Algorithm
   algorithmExists: true
   note: "Match score module exists (TypeScript - requires compilation)"

ğŸ§ª Testing: Payment Intent Creation...
âœ… PASSED: Payment Intent Creation
   canCreate: true
   canCancel: true
   intentId: "pi_3SWvCPGf57CmEub7108Hqrv5"

ğŸ§ª Testing: Notification Services...
âœ… PASSED: Notification Services
   expo: {"configured":true}
   resend: {"configured":true}

ğŸ§ª Testing: Database Tables...
âœ… PASSED: Database Tables
   allTablesExist: true
   tables: 7

============================================================

ğŸ“Š TEST SUMMARY

âœ… Environment Variables
âœ… Database Connectivity
âœ… Stripe Connectivity
âœ… API Endpoints
âœ… Auto-Release Cron
âœ… Matching Algorithm
âœ… Payment Intent Creation
âœ… Notification Services
âœ… Database Tables

âœ… Passed: 9
âŒ Failed: 0
ğŸ“ˆ Total: 9

============================================================
ğŸ“„ DETAILED REPORT
============================================================

Comprehensive Test Report
Generated: 2025-11-24T08:32:44.098Z
Node Version: v24.11.1
Working Directory: C:\SpareCarry

============================================================

SUMMARY
============================================================
Total Tests: 9
Passed: 9
Failed: 0
Success Rate: 100.0%

DETAILED RESULTS
============================================================

1. Environment Variables
   Status: âœ… PASSED
   Details:
     count: 8

2. Database Connectivity
   Status: âœ… PASSED
   Details:
     connected: true
     canQuery: true

3. Stripe Connectivity
   Status: âœ… PASSED
   Details:
     connected: true
     mode: test

4. API Endpoints
   Status: âœ… PASSED
   Details:
     accessible: 6
     endpoints: [
  {
    "endpoint": "/api/matches/auto-match",
    "status": 401,
    "note": "Endpoint exists and responded"
  },
  {
    "endpoint": "/api/payments/create-intent",
    "status": 401,
    "note": "Endpoint exists and responded"
  },
  {
    "endpoint": "/api/payments/confirm-delivery",
    "status": 401,
    "note": "Endpoint exists and responded"
  },
  {
    "endpoint": "/api/payments/auto-release",
    "status": 401,
    "note": "Endpoint exists and responded"
  },
  {
    "endpoint": "/api/notifications/register-token",
    "status": 401,
    "note": "Endpoint exists and responded"
  },
  {
    "endpoint": "/api/notifications/send-message",
    "status": "error",
    "error": "The operation was aborted due to timeout",
    "note": "Server running but endpoint unreachable - check if route exists"
  }
]

5. Auto-Release Cron
   Status: âœ… PASSED
   Details:
     accessible: false
     warning: Server not running
     note: Start server with: pnpm dev
   âš ï¸  Warning: Server not running
   â„¹ï¸  Note: Start server with: pnpm dev

6. Matching Algorithm
   Status: âœ… PASSED
   Details:
     algorithmExists: true
     note: Match score module exists (TypeScript - requires compilation)
   â„¹ï¸  Note: Match score module exists (TypeScript - requires compilation)

7. Payment Intent Creation
   Status: âœ… PASSED
   Details:
     canCreate: true
     canCancel: true
     intentId: pi_3SWvCPGf57CmEub7108Hqrv5

8. Notification Services
   Status: âœ… PASSED
   Details:
     expo: {
  "configured": true
}
     resend: {
  "configured": true
}

9. Database Tables
   Status: âœ… PASSED
   Details:
     allTablesExist: true
     tables: 7


============================================================
ENVIRONMENT INFORMATION
============================================================
NODE_ENV: not set
BASE_URL: http://localhost:3000
CRON_SECRET: âœ… Set

Key Environment Variables:
  âœ… NEXT_PUBLIC_SUPABASE_URL: Set
  âœ… NEXT_PUBLIC_SUPABASE_ANON_KEY: Set
  âœ… SUPABASE_SERVICE_ROLE_KEY: Set
  âœ… STRIPE_SECRET_KEY: Set
  âœ… STRIPE_WEBHOOK_SECRET: Set
  âœ… RESEND_API_KEY: Set


ğŸ“ Detailed report also saved to: C:\SpareCarry\test-results-comprehensive-detailed.txt

ğŸ‰ All tests passed! Your app is ready for production.

============================================================
Test Run Completed: 2025-11-24T08:32:44.102Z
============================================================

